# OSI 7계층

![osi-model-7-layers-1](OSI 7계층.assets/osi-model-7-layers-1.png)



#### 계층은 왜 나눌까?

1. 다른 절차를 사용하던 통신을 하려고 하다보니 규격이 필요했다.
2. 통신이 일어나는 과정을 단계별로 파악할 수 있다.
3. 중간에 계층에 이상이 생기면 어떤 부분에서 오류가 났는지 상대적으로 알기가 쉽다.
4. 특정한 곳에 이상이 생기면 그 단계만 수정할 수 있다.



##### 1) 물리(Physical)

> 리피터, 케이블, 허브 등

- 전송하는데 필요한 기능을 제공 ( 통신 케이블, 허브 )
- 비트단위 데이터를 전기적 신호로 바꿈

단지 데이터 전기적인 신호로 변환해서 주고받는 기능을 진행하는 공간

즉, 데이터를 전송하는 역할만 진행한다.



##### 2) 데이터 링크(Data Link)

> 브릿지, 스위치 등

- 송/수신 확인. MAC 주소를 가지고 통신함 ( 브릿지, 스위치 )
- 동일한 네트워크에서의 전송을 담당
- 오류제어 : Frame(데이터 단위) 오류나면 버림

물리 계층으로 송수신되는 정보를 관리하여 안전하게 전달되도록 도와주는 역할

Mac 주소를 통해 통신한다. 프레임에 Mac 주소를 부여하고 에러검출, 재전송, 흐름제어를 진행한다.



##### 3) 네트워크(Network)

> 라우터, IP

- 데이터를 목적지까지 가장 안전하고 빠르게 전달하는 기능을 담당한다.
- 네트워크들 사이에서 데이터를 전송하는 역할
- 호스트에 IP번호를 부여, 목적지까지의 최적 경로 찾아줌

라우터: 이동할 경로를 선택, IP 주소를 지정하고, 해당 경로에 따라 패킷을 전달



##### 4) 전송(Transport)

> TCP, UDP

- 패킷을 네트워크 간의 IP를 통해 데이터 전달 ( 라우팅 )
- 데이터를 적절한 애플리케이션에 배분하는 역할
- 세그멘테이션 : 상위 계층 데이터를 세그먼트로 나눔
- 흐름제어 : 데이터전송량이 다른 기기에서의 전송량 제어
- 오류제어

TCP와 UDP 프로토콜을 통해 통신을 활성화한다. 포트를 열어두고, 프로그램들이 전송을 할 수 있도록 제공해준다.

- TCP : 신뢰성, 연결지향적
- UDP : 비신뢰성, 비연결성, 실시간



##### 5) 세션(Session)

> API, Socket

- 통신 시스템 사용자간의 연결을 유지 및 설정함
- 세션복구, 체크포인트 이용

데이터가 통신하기 위한 논리적 연결을 담당한다. TCP/IP 세션을 만들고 없애는 책임을 지니고 있다.



##### 6) 표현(Presentation)

> JPEG, MPEG 등

- 세션 계층 간의 주고받는 인터페이스를 일관성있게 제공
- 데이터 변환, 압축, 암호화

데이터 표현에 대한 독립성을 제공하고 암호화하는 역할을 담당한다.

파일 인코딩, 명령어를 포장, 압축, 암호화한다.



##### 7) 응용(Application)

> HTTP, FTP, SMTP, Telnet, DNS 등

- 사용자가 네트워크에 접근할 수 있도록 서비스 제공
- 인간이 인식할 수 있도록 데이터를 표현한다
- 애플리케이션 기능을 실행하기 위한 데이터의 형식과 처리 절차등을 결정하는 것

최종 목적지로, 응용 프로세스와 직접 관계하여 일반적인 응용 서비스를 수행한다.

사용자 인터페이스, 전자우편, 데이터베이스 관리 등의 서비스를 제공한다.

![image2](OSI 7계층.assets/image2.png)

![1601E90D4BC20EA834](OSI 7계층.assets/1601E90D4BC20EA834.png)





#### 계층별로 데이터를 부르는 방법

- Application Layer (HTTP) : 메세지
- Transport Layer (TCP) : 세그먼트 또는 데이터그램 (TCP → 세그먼트, UDP → 데이터그램)
- Network Layer (IP) : 패킷
- Data Link Layer (이더넷) : 프레임



#### 캡슐화

##### 헤더

- 헤더 : 각 프로토콜의 처리를 하기 위한 제어 정보.
- 캡슐화 : 데이터에 헤더를 추가하는 것
- 역캡슐화 : 프로토콜이 데이터를 받으면, 각 프로토콜 헤더를 바탕으로 처리하여 헤더를 벗
  겨내고 다시 다른 프로토콜로 처리를 넘긴다



##### 물리적 신호로 변환

데이터를 보내는쪽은 TCP/IP 계층을 위에서부터 아래로 따라가며 각 프로토콜 헤더를 추가한
다.

1. 웹브라우저의 데이터는 HTTP 헤더로 캡슐화 되어 TCP로 넘어간다
2. TCP 헤더가 추가되고 다시 IP 헤더가 추가된다
3. 이더넷 헤더와 FCS(Frame Check Sequence)가 추가된다 :  FCS는 에러 체크를 위한 정보
4. 이더넷 규격에 해당하는 물리적 신호로 변환해 전송 매체로 내보낸다.

   

TCP/IP의 상위 계층 프로토콜에서부터 하위 계층 프로토콜의 헤더가 점차 캡슐화 된다.
네트워크로 내보내는 데이터에는 여러 프로토콜의 헤더가 추가된다.



#### 데이터 수신, 전송할 때의 규칙

##### 0 과 1의 데이터로 되돌려서 전송한다

- 네트워크 기기는 물리적인 신호를 0과 1로 변환해서, 각각의 동작을 위한 헤더를 참조해서
  데이터를 전송한다.

##### 헤더로 목적지를 확인하고 수신한다

- 데이터를 수신하는 쪽은 TCP/IP 계층을 아래에서부터 위로 헤더를 참조해 프로토콜을 처
  리한다.



#### ARP란?

- IP 주소와 MAC 주소를 대응시키는 것 (주소해석)
- ARP 동작 흐름
  1. ARP 요청으로 IP 주소에 대응하는 MAC 주소를 질의
  2. 질의받은 IP 주소를 가진 호스트가 ARP 응답으로 MAC 주소 알려줌
  3. 주소 해석한 IP 주소와 MAC 주소의 대응을 ARP 캐시에 보존한다



헤더 관련 뭐가 붙는지---!!!!!

**물리** : 전송하는데 필요한 기능을 제공 ( 통신 케이블, 허브 )

**데이터링크** : 송/수신 확인. MAC 주소를 가지고 통신함 ( 브릿지, 스위치 )

**네트워크** : 패킷을 네트워크 간의 IP를 통해 데이터 전달 ( 라우팅 )

**전송** : 두 host 시스템으로부터 발생하는 데이터 흐름 제공

**세션** : 통신 시스템 사용자간의 연결을 유지 및 설정함

**표현** : 세션 계층 간의 주고받는 인터페이스를 일관성있게 제공

**응용** : 사용자가 네트워크에 접근할 수 있도록 서비스 제공