<html>
  <head>
    <meta charset="UTF-8">
    <title>HTML5 Canvas</title>
    </meta>
  </head>
  <body>
    <!-- 캔버스에 그림을 그릴 수 있게 해주는 스크립트 -->
    <!-- 캔버스 불러오기 -->
    <canvas id="draw" width="800" height="800"></canvas>
    <script>
      // 캔버스 가져오기
      const canvas = document.querySelector('#draw');
      // 캔버스에 직접 그리는게 아니라, context를 통해 그리는 것임
      // context를 불러옴
      const ctx = canvas.getContext('2d');
      // 캔버스를 윈도우 사이즈로 리사이즈
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;
      // 스트로크 스타일 세팅: BADASS
      ctx.strokeStyle = '#BADA55'; // 색상 (그냥 연두색입니다.)
      ctx.lineJoin = 'round'; // 라인 끝 모양
      ctx.lineCap = 'round';   // 자세한건 mdn 보라고 함
      ctx.lineWidth = 50;
      ctx.globalCompositeOperation = 'multiply'; // 선이 겹치면 색이 섞이는 효과를 만들어줌
      
      // 더미 변수 생성
      let isDrawing = false; // 마우스 커서로 그리고 있는지 (클릭) 체크하는 flag
      let lastX = 0;        // 라인이 끝나는 X 지점
      let lastY = 0;        //           Y 지점
      let hue = 0;          // 색상
      let direction = true; // 선 굵기의 증감 방향을 결정
      
      // 마우스 움직임을 듣고 기록해줄 콘솔 로그 함수 draw
      function draw(e){
        if (!isDrawing) return; // 마우스를 누를 때만 실행하게 해줌
        console.log(e);
        // Badass 색에서 hue 적용한걸로 변경
        ctx.strokeStyle = `hsl(${hue}, 100%, 50%)`; // hue = 0 : 빨간색에서 시작
        ctx.beginPath();
        // start from
        ctx.moveTo(lastX, lastY);
        // go to
        ctx.lineTo(e.offsetX, e.offsetY); // e.offset은 draw에서 기록된 좌표값들
        ctx.stroke();
        [lastX, lastY] = [e.offsetX, e.offsetY]; // 갱신
        hue++; // 색상 변경
        if (hue >= 360) {
          hue = 0;
        }
        // direction: 선의 굵기가 증가하는지, 줄어드는지 방향을 결정하
        if (ctx.lineWidth >= 75 || ctx.lineWidth <= 25) {
          direction = !direction;
        }
        if (direction){
          ctx.lineWidth++;
        } else {
          ctx.lineWidth--;
        } // 선 굵기가 75 - 25를 왔다갔다하게 됨
      }
      // 크롬 개발자 도구의 콘솔 로그에서 움직임 확인 가능!
      canvas.addEventListener('mousemove', draw);
      // 마우스를 누르면 플래그 on, 놓거나 나갈 경우, 플래그 내려줌
      canvas.addEventListener('mousedown', (e) => {
        isDrawing = true;
        [lastX, lastY] = [e.offsetX, e.offsetY]; // 첫 기준 점이 0,0이 되고, 그 다음 기준 점도 이전 선에서 시작하는 걸 막아주는 부분
      });
      canvas.addEventListener('mouseup', () => isDrawing = false); // 마우스 놓거나
      canvas.addEventListener('mouseout', () => isDrawing = false); // 화면 나가면 그림 끝

    </script>
    <style>
      html, body {
        margin: 0;
      }
    </style>
  </body>
</html>